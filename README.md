# OSM Linter

[![Build Status](https://travis-ci.org/opentransportation/osmlinter.svg?branch=master)](https://travis-ci.org/opentransportation/osmlinter)
[![npm version](https://badge.fury.io/js/osmlinter.svg)](https://badge.fury.io/js/osmlinter)
[![MIT licensed](https://img.shields.io/badge/license-MIT-blue.svg)](https://raw.githubusercontent.com/opentransportation/osmlinter/master/LICENSE)
[![ES5](https://camo.githubusercontent.com/d341caa63123c99b79fda7f8efdc29b35f9f2e70/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f65732d352d627269676874677265656e2e737667)](http://kangax.github.io/compat-table/es5/)

[![Standard - JavaScript Style Guide](https://cdn.rawgit.com/feross/standard/master/badge.svg)](https://github.com/feross/standard)

> Advanced OSM linter for node and browsers

## Install

**npm**

```bash
$ yarn osmlinter
```

**web**

```html
<script type='module'>
import { getAngle } from "https://unpkg.com/osmlinter?module"
console.log(getAngle([5, 5], [5, 6], [3, 4]))
</script>
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### closestEndNodes

Closest End Nodes, this validator detects if a line has ending nodes closer to other lines.

End Nodes touching lines are ignored.

JSOM Linter (Way end node near other highway)

**Parameters**

-   `lines` **(FeatureCollection | Feature&lt;(LineString | MultiLineString)>)** GeoJSON (Multi)LineString(s)
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Optional parameters
    -   `options.maxDistance` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Maximum distance a node is allowed from lines (optional, default `7.5`)
    -   `options.units` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Measured distance units (kilometers, meters, miles) (optional, default `"meters"`)

**Examples**

```javascript
const lines = turf.featureCollection([
  turf.lineString([[5.00001, 6.00001], [2, 2], [0, 1]]),
  turf.lineString([[5, 5], [5, 6], [3, 4]])
])
const endNodes = osmlinter.closestEndNodes(lines)
//=endNodes
```

Returns **FeatureCollection&lt;Point>** End nodes near other lines

### index

Finds the angle between 3 points.

**Parameters**

-   `startPoint` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** Start Point Coordiantes
-   `midPoint` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** Mid Point Coordinates
-   `endPoint` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** End Point Coordinates
-   `options`  

**Examples**

```javascript
osmlinter.getAngle([5, 5], [5, 6], [3, 4])
//=45
```

Returns **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** angle

### index

Detects if line is closed

**Parameters**

-   `geojson` **Feature&lt;(LineString | MultiLineString | Polygon | MultiPolygon)>** LineString(s) or Polygons(s)
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Optional parameters (optional, default `{}`)

**Examples**

```javascript
const line1 = turf.lineString([[5, 5], [5, 6], [3, 4], [5, 5]])
const line2 = turf.lineString([[5, 5], [5, 6], [3, 4], [3, 3]])

osmlinter.isLineClosed(line1)
//=true
osmlinter.isLineClosed(line2)
//=false
```

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true/false if line is closed

### impossibleAngle

Impossible Angle, this validator detects lines with less likely turning angles.

**Parameters**

-   `lines` **(FeatureCollection | Feature&lt;(LineString | MultiLineString)>)** GeoJSON (Multi)LineString(s)
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Optional parameters
    -   `options.minAngle` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Minimum Angle in degrees (optional, default `10`)
    -   `options.maxAngle` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Maximum Angle in degrees (optional, default `Infinity`)

**Examples**

```javascript
const line = {
  type: 'LineString',
  coordinates: [[5, 5], [5, 6], [3, 4]]
}
osmlinter.impossibleAngle(line)
```

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true/false

### isBuilding

Detects if geometry is highly likely to be a building

**Parameters**

-   `geojson` **Feature&lt;(LineString | MultiLineString | Polygon | MultiPolygon)>** LineString(s) or Polygons(s)
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Optional parameters (optional, default `{}`)
    -   `options.minArea` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Minimum area in square meters (optional, default `0`)
    -   `options.maxArea` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Maximum area in square meters (optional, default `40000`)

**Examples**

```javascript
const line = turf.lineString([[5, 5], [5, 6], [3, 4], [4, 4] [5, 5]])

osmlinter.isBuilding(line)
//=true/false
```

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true/false

### isRiverbank

Detects if geometry is highly likely to be a riverbank

**Parameters**

-   `geojson` **Feature&lt;(LineString | MultiLineString | Polygon | MultiPolygon)>** LineString(s) or Polygons(s)
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Optional parameters (optional, default `{}`)
    -   `options.minArea` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Minimum area in square meters (optional, default `40000`)
    -   `options.maxArea` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Maximum area in square meters (optional, default `Infinity`)

**Examples**

```javascript
const line = turf.lineString([[5, 5], [5, 6], [3, 4]])

osmlinter.isRiverbank(line)
//=true/false
```

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true/false

### totalNodes

Count the amount of Nodes in a GeoJSON Geometry

**Parameters**

-   `geojson` **GeoJSON** GeoJSON

**Examples**

```javascript
const line = turf.lineString([[10, 5], [-10, 0]])

osmlinter.totalNodes(line) // => 2
```

Returns **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Total number of nodes in GeoJSON
